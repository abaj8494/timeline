import{t as ft,a as H,n as Pt,c as ue,b as he}from"./CB0lZw64.js";import{i as fe}from"./36iwJYuS.js";import{p as pe,o as ve,T as q,V as me,W as K,a as ge,m as l,n as _,e as t,Z as Xt,_ as Gt,Y as I,X as k,$ as R,a0 as dt,d}from"./EIGgl-ut.js";import{e as Y,s as O}from"./CBrunzHD.js";import{i as ut}from"./BZLUw1rn.js";import{e as jt,s as r,i as Lt}from"./Diwdagdi.js";import{s as ht}from"./W_8ns1rb.js";import{p as be}from"./bkRm03nm.js";import{r as xe}from"./D1ktBid4.js";var _e=Pt('<line class="time-marker-line svelte-18o6i9k"></line><text text-anchor="middle" class="time-marker svelte-18o6i9k"> </text>',1),ke=Pt('<g role="button" tabindex="0" class="svelte-18o6i9k"><text text-anchor="middle" class="book-title svelte-18o6i9k"> </text><circle class="book-dot svelte-18o6i9k"></circle><line stroke="#555" stroke-width="0.5" stroke-dasharray="2 2"></line></g>'),we=Pt('<g role="button" tabindex="0" class="svelte-18o6i9k"><text text-anchor="middle" class="person-name svelte-18o6i9k"> </text><rect class="person-bar svelte-18o6i9k"></rect><line stroke="#555" stroke-width="0.5" stroke-dasharray="2 2"></line></g>'),ye=ft(" <br> ",1),Me=ft(" <br> ",1),Ye=ft('<div class="image-popup svelte-18o6i9k"><img class="svelte-18o6i9k"> <h4 class="svelte-18o6i9k"> </h4> <p class="svelte-18o6i9k"><!></p> <button style="position: absolute; top: 5px; right: 5px; background: none; border: none; color: white; cursor: pointer; font-size: 16px;">Ã—</button></div>'),De=ft('<div class="timeline-container svelte-18o6i9k" role="application" aria-label="Interactive timeline visualization - click and drag to pan, scroll to zoom, pinch to zoom on mobile"><div class="timeline-content svelte-18o6i9k"><svg class="svelte-18o6i9k"><rect x="0" y="0" fill="#17191C"></rect><!><line class="main-timeline svelte-18o6i9k"></line><!></svg></div> <!></div>');function Ce(Ut,Tt){pe(Tt,!1);const L=_(),at=_(),st=_(),U=_(),F=_(),At=_(),J=_();let Z=be(Tt,"items",8);const Q=60,P=800,B=8,pt=40,rt=90,Et=10,vt=1.2,mt=25,St=6;function It(e){return e.title!==void 0&&e.published!==void 0}function Rt(e){return e.title!==void 0&&e.created!==void 0}function Ft(e){return It(e)||Rt(e)}function N(e){return(e-t(L))*vt+Q}function Zt(){const n=Array.from({length:Math.ceil((t(at)-t(L))/100)+1},(o,i)=>Math.floor(t(L)/100)*100+i*100),a=[];for(let o=0;o<n.length;o++){const i=n[o],s=N(i);let m=!0;if(o>0){for(let u=o-1;u>=0;u--)if(a[u].above===m){const x=N(a[u].value);Math.abs(s-x)<60&&(m=!1);break}if(!m){for(let u=o-1;u>=0;u--)if(!a[u].above){const x=N(a[u].value);Math.abs(s-x)<60&&(m=!0);break}}}a.push({value:i,above:m})}return a}function G(e){return e===0?"0":e<0?`${Math.abs(e)}BC`:`${e}`}let c=_(null),gt=_(0),bt=_(0),tt=!1,Ct=0,Wt=0,T=_(0),A=_(0),Bt=0,Nt=0,v=null,et=0,it=1,g=_(1),xt=_(0),nt=!1,_t=0,kt=0,wt=0,yt=0,Mt=0,Yt=0,$t=0,Ht=0;ve(()=>{if(v=document.querySelector(".timeline-container"),v){l(xt,v.clientWidth),v.clientHeight;const e=v.clientWidth/t(J),n=v.clientHeight/t(U),a=Math.min(e,n)*.9;l(g,Math.max(.3,Math.min(10,a)));const o=t(J)*t(g),i=t(U)*t(g);l(T,(v.clientWidth-o)/2),l(A,(v.clientHeight-i)/2)}});function Jt(e){e.target.closest(".person-bar, .book-dot, .person-name, .book-title, .image-popup")||(t(c)&&l(c,null),tt=!0,Ct=e.clientX,Wt=e.clientY,Bt=t(T),Nt=t(A),v&&(v.style.cursor="grabbing"))}function Qt(e){if(!tt)return;e.preventDefault();const n=e.clientX-Ct,a=e.clientY-Wt;l(T,Bt+n),l(A,Nt+a)}function te(){tt=!1,v&&(v.style.cursor="grab")}function ee(){tt&&(tt=!1,v&&(v.style.cursor="grab"))}function ne(e){e.preventDefault();const o=1+-e.deltaY*.002,i=Math.max(.1,Math.min(20,t(g)*o));if(i!==t(g))if(v){const s=v.getBoundingClientRect(),m=e.clientX-s.left,u=e.clientY-s.top,x=(m-t(T))/t(g),D=(u-t(A))/t(g);l(g,i),l(T,m-x*t(g)),l(A,u-D*t(g))}else l(g,i)}function Ot(e){const n=e[0].clientX-e[1].clientX,a=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+a*a)}function oe(e){return{x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}}function ae(e){if(!e.target.closest(".person-bar, .book-dot, .person-name, .book-title, .image-popup")){if(e.touches.length===1)e.preventDefault(),nt=!0,_t=e.touches[0].clientX,kt=e.touches[0].clientY,wt=t(T),yt=t(A),t(c)&&l(c,null);else if(e.touches.length===2&&(e.preventDefault(),nt=!1,et=Ot(e.touches),it=t(g),v)){const n=v.getBoundingClientRect(),a=oe(e.touches);Mt=a.x-n.left,Yt=a.y-n.top,$t=t(T),Ht=t(A)}}}function se(e){if(e.touches.length===1&&nt){e.preventDefault();const n=e.touches[0].clientX-_t,a=e.touches[0].clientY-kt;l(T,wt+n),l(A,yt+a)}else if(e.touches.length===2&&et>0){e.preventDefault();const a=Ot(e.touches)/et,o=Math.max(.1,Math.min(20,it*a));if(o!==t(g)&&v){const i=(Mt-$t)/it,s=(Yt-Ht)/it;l(g,o),l(T,Mt-i*t(g)),l(A,Yt-s*t(g))}}}function re(e){e.touches.length===0?(nt=!1,et=0):e.touches.length===1&&(et=0,nt=!0,_t=e.touches[0].clientX,kt=e.touches[0].clientY,wt=t(T),yt=t(A))}function zt(e,n){l(c,e);const a=qt(n.clientX,n.clientY);l(gt,a.x),l(bt,a.y),n.stopPropagation()}function Vt(e,n){if(n.key==="Enter"||n.key===" "){n.preventDefault(),l(c,e);const a=n.target.getBoundingClientRect(),o=qt(a.left+a.width/2,a.top+a.height/2);l(gt,o.x),l(bt,o.y)}}function qt(e,n){const a={width:220,height:300},o=20;let i=e,s=n;return i+a.width/2>window.innerWidth-o&&(i=window.innerWidth-a.width/2-o),i-a.width/2<o&&(i=a.width/2+o),s+a.height/2>window.innerHeight-o&&(s=window.innerHeight-a.height/2-o),s-a.height/2<o&&(s=a.height/2+o),{x:i,y:s}}q(()=>Xt(Z()),()=>{l(L,Math.floor(Math.min(...Z().map(e=>e.born||e.published||e.created||0))/100)*100-100)}),q(()=>Xt(Z()),()=>{l(at,Math.ceil(Math.max(...Z().map(e=>e.died||e.created||e.published||new Date().getFullYear()||0))/100)*100)}),q(()=>(t(at),t(L)),()=>{l(st,(t(at)-t(L))*vt+Q*2)}),q(()=>{},()=>{l(U,P+Q*3+mt*2*(B+pt))}),q(()=>Xt(Z()),()=>{l(F,[...Z()].sort((e,n)=>(e.born||e.published||e.created||0)-(n.born||n.published||n.created||0)))}),q(()=>{},()=>{l(At,Zt())}),q(()=>t(F),()=>{const e=[],n=[];for(let o=0;o<t(F).length;o++)o%2===0?(e.push(t(F)[o]),Gt(F,t(F)[o].placement="top")):(n.push(t(F)[o]),Gt(F,t(F)[o].placement="bottom"));function a(o){o.sort((i,s)=>(i.born||i.published||i.created||0)-(s.born||s.published||s.created||0));for(let i=0;i<o.length;i++){const s=o[i],m=s.born||s.published||s.created||0,u=s.died||s.created||s.published||new Date().getFullYear();let x=!1,D=1;for(;!x&&D<=mt;)o.some((h,p)=>{var y,b;if(p>=i||h.row!==D)return!1;const w=h.born||h.published||h.created||0,f=h.died||h.created||h.published||new Date().getFullYear();if(Ft(s)&&Ft(h)){const M=(((y=s.title)==null?void 0:y.length)||0)*6,C=(((b=h.title)==null?void 0:b.length)||0)*6,X=Math.max(M,C),$=Math.max(50,X/vt);return Math.abs(m-w)<$}return m<=f+70&&u>=w-70})?D++:(s.row=D,x=!0);x||(s.row=mt)}}a(e),a(n)}),q(()=>(t(st),t(xt)),()=>{l(J,Math.max(t(st),t(xt)/.5))}),me(),fe();var E=De(),lt=I(E),ct=I(lt),Dt=I(ct),Kt=k(Dt);jt(Kt,1,()=>t(At),Lt,(e,n)=>{var a=_e(),o=dt(a);r(o,"y1",0);var i=k(o),s=I(i,!0);R(i),K((m,u,x,D)=>{r(o,"x1",m),r(o,"x2",u),r(o,"y2",t(U)),r(i,"x",x),r(i,"y",t(n).above?P-20:P+30),O(s,D)},[()=>N(t(n).value),()=>N(t(n).value),()=>N(t(n).value),()=>G(t(n).value)],d),H(e,a)});var ot=k(Kt);r(ot,"x1",Q),r(ot,"y1",P),r(ot,"y2",P);var ie=k(ot);jt(ie,1,()=>t(F),Lt,(e,n)=>{var a=ue();const o=d(()=>t(n).born||t(n).published||t(n).created||0),i=d(()=>It(t(n))),s=d(()=>Rt(t(n))),m=d(()=>t(i)||t(s)),u=d(()=>t(m)?t(n).title:t(n).name);var x=dt(a);{var D=h=>{var p=ke();const w=d(()=>N(t(o))),f=d(()=>t(n).placement==="top"),y=d(()=>(t(n).row-1)*(B+pt)),b=d(()=>t(f)?P-rt-t(y)-B/2:P+rt+t(y)+B/2),M=d(()=>t(s)?"#FF6B9D":"#4A9EFF"),C=d(()=>t(s)?"{displayName} by {item.artist}, created {formatYear(yearValue)}":"{displayName} by {item.author}, published {formatYear(yearValue)}");var X=I(p),$=I(X,!0);R(X);var j=k(X);r(j,"r",St);var W=k(j);R(p),K(()=>{r(p,"aria-label",t(C)),r(X,"x",t(w)),r(X,"y",t(b)+(t(f)?-16:Et+6)),ht(X,`fill: ${t(s)?"#FF6B9D":"#4A9EFF"}`),O($,t(u)),r(j,"cx",t(w)),r(j,"cy",t(b)),ht(j,`fill: ${t(M)??""}; stroke: ${t(M)??""}`),r(W,"x1",t(w)),r(W,"y1",t(b)+(t(f)?St:-6)),r(W,"x2",t(w)),r(W,"y2",P+(t(f)?-3:3))}),Y("click",p,z=>zt(t(n),z)),Y("keydown",p,z=>Vt(t(n),z)),H(h,p)},S=h=>{var p=we();const w=d(()=>t(n).died||new Date().getFullYear()),f=d(()=>N(t(o))),y=d(()=>N(t(w))),b=d(()=>Math.max(t(y)-t(f),5)),M=d(()=>t(n).placement==="top"),C=d(()=>(t(n).row-1)*(B+pt)),X=d(()=>t(M)?P-rt-t(C)-B:P+rt+t(C));var $=I(p),j=I($,!0);R($);var W=k($);r(W,"height",B);var z=k(W);R(p),K((V,de)=>{r(p,"aria-label",`${t(u)??""}, ${V??""} to ${de??""}`),r($,"x",t(f)+t(b)/2),r($,"y",t(X)+(t(M)?-10:B+Et)),O(j,t(u)),r(W,"x",t(f)),r(W,"y",t(X)),r(W,"width",t(b)),r(z,"x1",t(f)+t(b)/2),r(z,"y1",t(X)+(t(M)?B:0)),r(z,"x2",t(f)+t(b)/2),r(z,"y2",P+(t(M)?-3:3))},[()=>{var V;return(V=t(c))!=null&&V.born?G(t(n).born):""},()=>t(n).died?G(t(n).died):"present"],d),Y("click",p,V=>zt(t(n),V)),Y("keydown",p,V=>Vt(t(n),V)),H(h,p)};ut(x,h=>{t(m)?h(D):h(S,!1)})}H(e,a)}),R(ct),R(lt);var le=k(lt,2);{var ce=e=>{var n=Ye(),a=I(n),o=k(a,2),i=I(o,!0);R(o);var s=k(o,2),m=I(s);{var u=S=>{var h=ye(),p=dt(h,!0),w=k(p,2);K(f=>{O(p,t(c).artist),O(w,` ${f??""}`)},[()=>G(t(c).created)],d),H(S,h)},x=(S,h)=>{{var p=f=>{var y=Me(),b=dt(y,!0),M=k(b,2);K(C=>{O(b,t(c).author),O(M,` ${C??""}`)},[()=>G(t(c).published)],d),H(f,y)},w=f=>{var y=he();K((b,M,C)=>O(y,`${b??""} -
					${M??""}
					(${C??""} years)`),[()=>t(c).born?G(t(c).born):"",()=>t(c).died?G(t(c).died):"present",()=>t(c).died?Math.abs(t(c).died-t(c).born):Math.abs(new Date().getFullYear()-t(c).born)],d),H(f,y)};ut(S,f=>{t(c).published?f(p):f(w,!1)},h)}};ut(m,S=>{t(c).created?S(u):S(x,!1)})}R(s);var D=k(s,2);R(n),K(S=>{ht(n,`left: ${t(gt)??""}px; top: ${t(bt)??""}px;`),r(a,"src",S),r(a,"alt",t(c).name||t(c).title),O(i,t(c).name||t(c).title)},[()=>xe(t(c).image)],d),Y("click",D,()=>l(c,null)),H(e,n)};ut(le,e=>{t(c)&&e(ce)})}R(E),K(()=>{ht(lt,`transform: translate(${t(T)??""}px, ${t(A)??""}px) scale(${t(g)??""}); transform-origin: 0 0;`),r(ct,"width",t(J)),r(ct,"height",t(U)),r(Dt,"width",t(J)),r(Dt,"height",t(U)),r(ot,"x2",t(st)-Q)}),Y("mousedown",E,Jt),Y("mousemove",E,Qt),Y("mouseup",E,te),Y("mouseleave",E,ee),Y("wheel",E,ne),Y("touchstart",E,ae),Y("touchmove",E,se),Y("touchend",E,re),H(Ut,E),ge()}export{Ce as T};
