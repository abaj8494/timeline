import{t as ct,a as B,n as gt,c as Zt,b as Jt}from"./CXO4SUQH.js";import{i as te}from"./CCMQ1FqB.js";import{o as ee}from"./UKlZL6Oz.js";import{p as oe,O as H,Q as ne,R as L,a as se,m as p,n as D,e as t,W as xt,X as Wt,V as E,T as x,Y as F,Z as rt,d as h}from"./CbWlX3Uk.js";import{e as y,s as O}from"./D2Q5qIZK.js";import{i as lt}from"./C8t1nucw.js";import{e as Rt,s as a,i as Bt}from"./CN872F4n.js";import{s as it}from"./-uhDPwO0.js";import{p as ae}from"./sWsCrfk1.js";import{r as re}from"./BdMFXu6Q.js";var le=gt('<line class="time-marker-line svelte-42xpdj"></line><text text-anchor="middle" class="time-marker svelte-42xpdj"> </text>',1),ie=gt('<g role="button" tabindex="0" class="svelte-42xpdj"><text text-anchor="middle" class="book-title svelte-42xpdj"> </text><circle class="book-dot svelte-42xpdj"></circle><line stroke="#555" stroke-width="0.5" stroke-dasharray="2 2"></line></g>'),ce=gt('<g role="button" tabindex="0" class="svelte-42xpdj"><text text-anchor="middle" class="person-name svelte-42xpdj"> </text><rect class="person-bar svelte-42xpdj"></rect><line stroke="#555" stroke-width="0.5" stroke-dasharray="2 2"></line></g>'),de=ct(" <br> ",1),he=ct(" <br> ",1),fe=ct('<div class="image-popup svelte-42xpdj"><img class="svelte-42xpdj"> <h4 class="svelte-42xpdj"> </h4> <p class="svelte-42xpdj"><!></p> <button style="position: absolute; top: 5px; right: 5px; background: none; border: none; color: white; cursor: pointer; font-size: 16px;">Ã—</button></div>'),ue=ct('<div class="timeline-container svelte-42xpdj" role="application" aria-label="Interactive timeline visualization - click and drag to pan, scroll to zoom, pinch to zoom on mobile"><div class="timeline-content svelte-42xpdj"><svg class="svelte-42xpdj"><rect x="0" y="0" fill="#17191C"></rect><!><line class="main-timeline svelte-42xpdj"></line><!></svg></div> <!></div>');function ke(Ot,bt){oe(bt,!1);const q=D(),Q=D(),et=D(),z=D(),P=D(),_t=D(),G=D();let U=ae(bt,"items",8);const Z=60,X=800,W=8,dt=40,ot=90,wt=10,ht=1.2,ft=25,yt=6;function Mt(e){return e.title!==void 0&&e.published!==void 0}function kt(e){return e.title!==void 0&&e.created!==void 0}function Yt(e){return Mt(e)||kt(e)}function K(e){return(e-t(q))*ht+Z}function N(e){return e===0?"0":e<0?`${Math.abs(e)}BC`:`${e}`}let c=D(null),ut=D(0),pt=D(0),J=!1,Tt=0,Dt=0,St=0,At=0,i,nt=0,Et=1,v=D(1),mt=D(0);ee(()=>{if(i=document.querySelector(".timeline-container"),i){p(mt,i.clientWidth),i.clientHeight;const e=i.querySelector(".timeline-content");if(e){const o=i.clientWidth/t(G),s=i.clientHeight/t(z),n=Math.min(o,s)*.95;p(v,Math.max(.1,Math.min(50,n))),e.style.transform=`scale(${t(v)})`,e.style.transformOrigin="top left";const r=t(G)*t(v),l=t(z)*t(v);i.scrollLeft=Math.max(0,(r-i.clientWidth)/2),i.scrollTop=Math.max(0,(l-i.clientHeight)/2)}}});function $t(e){e.target.closest(".person-bar, .book-dot, .person-name, .book-title, .image-popup")||(t(c)&&p(c,null),J=!0,Tt=e.pageX-i.offsetLeft,Dt=e.pageY-i.offsetTop,St=i.scrollLeft,At=i.scrollTop,i.style.cursor="grabbing")}function Ct(e){if(!J)return;e.preventDefault();const o=e.pageX-i.offsetLeft,s=e.pageY-i.offsetTop,n=(o-Tt)*1.5,r=(s-Dt)*1.5;i.scrollLeft=St-n,i.scrollTop=At-r}function Ht(){J=!1,i&&(i.style.cursor="grab")}function Lt(){J&&(J=!1,i&&(i.style.cursor="grab"))}function qt(e){e.preventDefault();const n=1+-e.deltaY*.001,r=Math.max(.1,Math.min(50,t(v)*n));if(r===t(v))return;const l=i.getBoundingClientRect(),M=e.clientX-l.left,k=e.clientY-l.top,A=i.scrollLeft,Y=i.scrollTop,g=(A+M)/t(v),f=(Y+k)/t(v);p(v,r);const d=i==null?void 0:i.querySelector(".timeline-content");d&&(d.style.transform=`scale(${t(v)})`,d.style.transformOrigin="top left"),i.scrollLeft=g*r-M,i.scrollTop=f*r-k}function Ft(e){const o=e[0].clientX-e[1].clientX,s=e[0].clientY-e[1].clientY;return Math.sqrt(o*o+s*s)}function zt(e){e.touches.length===2&&(e.preventDefault(),nt=Ft(e.touches),Et=t(v))}function Nt(e){if(e.touches.length===2&&nt>0){e.preventDefault();const s=Ft(e.touches)/nt,n=Math.max(.1,Math.min(50,Et*s));p(v,n);const r=i==null?void 0:i.querySelector(".timeline-content");r&&(r.style.transform=`scale(${t(v)})`,r.style.transformOrigin="top left")}}function Vt(e){e.touches.length<2&&(nt=0)}function Pt(e,o){p(c,e);const s=jt(o.clientX,o.clientY);p(ut,s.x),p(pt,s.y),o.stopPropagation()}function Xt(e,o){if(o.key==="Enter"||o.key===" "){o.preventDefault(),p(c,e);const s=o.target.getBoundingClientRect(),n=jt(s.left+s.width/2,s.top+s.height/2);p(ut,n.x),p(pt,n.y)}}function jt(e,o){const s={width:220,height:300},n=20;let r=e,l=o;return r+s.width/2>window.innerWidth-n&&(r=window.innerWidth-s.width/2-n),r-s.width/2<n&&(r=s.width/2+n),l+s.height/2>window.innerHeight-n&&(l=window.innerHeight-s.height/2-n),l-s.height/2<n&&(l=s.height/2+n),{x:r,y:l}}H(()=>xt(U()),()=>{p(q,Math.floor(Math.min(...U().map(e=>e.born||e.published||e.created||0))/100)*100-100)}),H(()=>xt(U()),()=>{p(Q,Math.ceil(Math.max(...U().map(e=>e.died||e.created||e.published||new Date().getFullYear()||0))/100)*100)}),H(()=>(t(Q),t(q)),()=>{p(et,(t(Q)-t(q))*ht+Z*2)}),H(()=>{},()=>{p(z,X+Z*3+ft*2*(W+dt))}),H(()=>xt(U()),()=>{p(P,[...U()].sort((e,o)=>(e.born||e.published||e.created||0)-(o.born||o.published||o.created||0)))}),H(()=>(t(Q),t(q)),()=>{p(_t,Array.from({length:Math.ceil((t(Q)-t(q))/100)+1},(e,o)=>Math.floor(t(q)/100)*100+o*100))}),H(()=>t(P),()=>{const e=[],o=[];for(let n=0;n<t(P).length;n++)n%2===0?(e.push(t(P)[n]),Wt(P,t(P)[n].placement="top")):(o.push(t(P)[n]),Wt(P,t(P)[n].placement="bottom"));function s(n){n.sort((r,l)=>(r.born||r.published||r.created||0)-(l.born||l.published||l.created||0));for(let r=0;r<n.length;r++){const l=n[r],M=l.born||l.published||l.created||0,k=l.died||l.created||l.published||new Date().getFullYear();let A=!1,Y=1;for(;!A&&Y<=ft;)n.some((f,d)=>{var _,m;if(d>=r||f.row!==Y)return!1;const b=f.born||f.published||f.created||0,u=f.died||f.created||f.published||new Date().getFullYear();if(Yt(l)&&Yt(f)){const w=(((_=l.title)==null?void 0:_.length)||0)*6,j=(((m=f.title)==null?void 0:m.length)||0)*6,T=Math.max(w,j),R=Math.max(50,T/ht);return Math.abs(M-b)<R}return M<=u+70&&k>=b-70})?Y++:(l.row=Y,A=!0);A||(l.row=ft)}}s(e),s(o)}),H(()=>(t(et),t(mt)),()=>{p(G,Math.max(t(et),t(mt)/.5))}),ne(),te();var S=ue(),st=E(S),at=E(st),vt=E(at),It=x(vt);Rt(It,1,()=>t(_t),Bt,(e,o)=>{var s=le(),n=rt(s);a(n,"y1",0);var r=x(n);a(r,"y",X-20);var l=E(r,!0);F(r),L((M,k,A,Y)=>{a(n,"x1",M),a(n,"x2",k),a(n,"y2",t(z)),a(r,"x",A),O(l,Y)},[()=>K(t(o)),()=>K(t(o)),()=>K(t(o)),()=>N(t(o))],h),B(e,s)});var tt=x(It);a(tt,"x1",Z),a(tt,"y1",X),a(tt,"y2",X);var Gt=x(tt);Rt(Gt,1,()=>t(P),Bt,(e,o)=>{var s=Zt();const n=h(()=>t(o).born||t(o).published||t(o).created||0),r=h(()=>Mt(t(o))),l=h(()=>kt(t(o))),M=h(()=>t(r)||t(l)),k=h(()=>t(M)?t(o).title:t(o).name);var A=rt(s);{var Y=f=>{var d=ie();const b=h(()=>K(t(n))),u=h(()=>t(o).placement==="top"),_=h(()=>(t(o).row-1)*(W+dt)),m=h(()=>t(u)?X-ot-t(_)-W/2:X+ot+t(_)+W/2),w=h(()=>t(l)?"#FF6B9D":"#4A9EFF"),j=h(()=>t(l)?"{displayName} by {item.artist}, created {formatYear(yearValue)}":"{displayName} by {item.author}, published {formatYear(yearValue)}");var T=E(d),R=E(T,!0);F(T);var V=x(T);a(V,"r",yt);var I=x(V);F(d),L(()=>{a(d,"aria-label",t(j)),a(T,"x",t(b)),a(T,"y",t(m)+(t(u)?-16:wt+6)),it(T,`fill: ${t(l)?"#FF6B9D":"#4A9EFF"}`),O(R,t(k)),a(V,"cx",t(b)),a(V,"cy",t(m)),it(V,`fill: ${t(w)??""}; stroke: ${t(w)??""}`),a(I,"x1",t(b)),a(I,"y1",t(m)+(t(u)?yt:-6)),a(I,"x2",t(b)),a(I,"y2",X+(t(u)?-3:3))}),y("click",d,$=>Pt(t(o),$)),y("keydown",d,$=>Xt(t(o),$)),B(f,d)},g=f=>{var d=ce();const b=h(()=>t(o).died||new Date().getFullYear()),u=h(()=>K(t(n))),_=h(()=>K(t(b))),m=h(()=>Math.max(t(_)-t(u),5)),w=h(()=>t(o).placement==="top"),j=h(()=>(t(o).row-1)*(W+dt)),T=h(()=>t(w)?X-ot-t(j)-W:X+ot+t(j));var R=E(d),V=E(R,!0);F(R);var I=x(R);a(I,"height",W);var $=x(I);F(d),L((C,Qt)=>{a(d,"aria-label",`${t(k)??""}, ${C??""} to ${Qt??""}`),a(R,"x",t(u)+t(m)/2),a(R,"y",t(T)+(t(w)?-10:W+wt)),O(V,t(k)),a(I,"x",t(u)),a(I,"y",t(T)),a(I,"width",t(m)),a($,"x1",t(u)+t(m)/2),a($,"y1",t(T)+(t(w)?W:0)),a($,"x2",t(u)+t(m)/2),a($,"y2",X+(t(w)?-3:3))},[()=>{var C;return(C=t(c))!=null&&C.born?N(t(o).born):""},()=>t(o).died?N(t(o).died):"present"],h),y("click",d,C=>Pt(t(o),C)),y("keydown",d,C=>Xt(t(o),C)),B(f,d)};lt(A,f=>{t(M)?f(Y):f(g,!1)})}B(e,s)}),F(at),F(st);var Ut=x(st,2);{var Kt=e=>{var o=fe(),s=E(o),n=x(s,2),r=E(n,!0);F(n);var l=x(n,2),M=E(l);{var k=g=>{var f=de(),d=rt(f,!0),b=x(d,2);L(u=>{O(d,t(c).artist),O(b,` ${u??""}`)},[()=>N(t(c).created)],h),B(g,f)},A=(g,f)=>{{var d=u=>{var _=he(),m=rt(_,!0),w=x(m,2);L(j=>{O(m,t(c).author),O(w,` ${j??""}`)},[()=>N(t(c).published)],h),B(u,_)},b=u=>{var _=Jt();L((m,w,j)=>O(_,`${m??""} - 
          ${w??""}
          (${j??""} years)`),[()=>t(c).born?N(t(c).born):"",()=>t(c).died?N(t(c).died):"present",()=>t(c).died?Math.abs(t(c).died-t(c).born):Math.abs(new Date().getFullYear()-t(c).born)],h),B(u,_)};lt(g,u=>{t(c).published?u(d):u(b,!1)},f)}};lt(M,g=>{t(c).created?g(k):g(A,!1)})}F(l);var Y=x(l,2);F(o),L(g=>{it(o,`left: ${t(ut)??""}px; top: ${t(pt)??""}px;`),a(s,"src",g),a(s,"alt",t(c).name||t(c).title),O(r,t(c).name||t(c).title)},[()=>re(t(c).image)],h),y("click",Y,()=>p(c,null)),B(e,o)};lt(Ut,e=>{t(c)&&e(Kt)})}F(S),L(()=>{it(st,`width: ${t(G)*t(v)}px; height: ${t(z)*t(v)}px;`),a(at,"width",t(G)),a(at,"height",t(z)),a(vt,"width",t(G)),a(vt,"height",t(z)),a(tt,"x2",t(et)-Z)}),y("mousedown",S,$t),y("mousemove",S,Ct),y("mouseup",S,Ht),y("mouseleave",S,Lt),y("wheel",S,qt),y("touchstart",S,zt),y("touchmove",S,Nt),y("touchend",S,Vt),B(Ot,S),se()}export{ke as T};
