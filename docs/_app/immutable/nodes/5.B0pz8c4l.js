import{t as h,a as _,c as ue}from"../chunks/BIYvNW0b.js";import{i as fe}from"../chunks/14nf3aC0.js";import{h as Q,a3 as _e,A as be,a4 as me,p as pe,o as he,a0 as ge,a1 as ye,W as A,x as a,a as we,Y as n,I as z,G as F,_ as c,Z as d,X as M,u as ae}from"../chunks/CSOfU5Pt.js";import{l as Ne,s as w,e as H}from"../chunks/vckkWNzg.js";import{i as I}from"../chunks/DBxt3fiE.js";import{a as ke,s as G,b as Se,e as xe,r as Ce}from"../chunks/vHPMZuXj.js";import{b as J}from"../chunks/Bp8_YYKX.js";import{p as Le}from"../chunks/DeeLMRMD.js";import{b as te}from"../chunks/Bnu58-W1.js";function re(e,b,l,N,t,i){var C=e.__className;if(Q||C!==l||C===void 0){var g=ke(l,N,i);(!Q||g!==e.getAttribute("class"))&&(g==null?e.removeAttribute("class"):e.className=g),e.__className=l}else if(i&&t!==i)for(var L in i){var R=!!i[L];(t==null||R!==!!t[L])&&e.classList.toggle(L,R)}return i}function Te(e,b,l=b){var N=_e();Ne(e,"input",t=>{var i=t?e.defaultValue:e.value;if(i=K(e)?O(i):i,l(i),N&&i!==(i=b())){var C=e.selectionStart,g=e.selectionEnd;e.value=i??"",g!==null&&(e.selectionStart=C,e.selectionEnd=Math.min(g,e.value.length))}}),(Q&&e.defaultValue!==e.value||be(b)==null&&e.value)&&l(K(e)?O(e.value):e.value),me(()=>{var t=b();K(e)&&t===O(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function K(e){var b=e.type;return b==="number"||b==="range"}function O(e){return e===""?null:+e}var $e=h('<div role="button" tabindex="0"><div class="result-header svelte-1334bia"><div class="result-name svelte-1334bia"> </div> <div> </div></div> <div class="result-date svelte-1334bia"> </div></div>'),Ae=h("<br> ",1),Me=h(" <!>",1),Re=h(" <br> ",1),Ve=h('<img class="detail-image svelte-1334bia"> <div class="detail-name svelte-1334bia"> </div> <div class="detail-info svelte-1334bia"><!></div> <button class="view-timeline-btn svelte-1334bia">View in Timeline</button>',1),Be=h('<div style="text-align: center; color: #666;">Click on a result to see details</div>'),De=h('<div class="results-container svelte-1334bia"><div class="results-list svelte-1334bia"></div> <div class="detail-panel svelte-1334bia"><!></div></div>'),Ee=h('<div class="no-results svelte-1334bia"> </div>'),Ie=h('<div class="no-results svelte-1334bia">Start typing to search people and books...</div>'),Pe=h('<a class="navigation-link svelte-1334bia" title="Back to Timeline">⏪</a> <div class="search-page svelte-1334bia"><div class="header svelte-1334bia"><h1 class="title svelte-1334bia">Search Timeline</h1> <p class="subtitle svelte-1334bia">Find people and books across history</p></div> <div class="search-container svelte-1334bia"><input type="text" class="search-input svelte-1334bia" placeholder="Search for people, books, years..."></div> <!></div>',1);function He(e,b){pe(b,!1);let l=z(""),N=z([]),t=z(null);function i(s){F(t,s)}function C(s){s==="person"?window.location.href=`${J}/people`:window.location.href=`${J}/books`}he(()=>{const s=document.querySelector(".search-input");s&&s.focus()}),ge(()=>(a(l),te),()=>{if(a(l).trim()){const s=a(l).toLowerCase(),T=Le.filter(r=>r.name.toLowerCase().includes(s)||r.born&&r.born.toString().includes(s)||r.died&&r.died.toString().includes(s)).map(r=>({...r,type:"person",displayName:r.name,dateRange:`${r.born||"?"} - ${r.died||"present"}`})),X=te.filter(r=>r.title.toLowerCase().includes(s)||r.author.toLowerCase().includes(s)||r.published&&r.published.toString().includes(s)).map(r=>({...r,type:"book",displayName:r.title,dateRange:`${r.published} • ${r.author}`}));F(N,[...T,...X].sort((r,V)=>{const y=r.displayName.toLowerCase().includes(s),m=V.displayName.toLowerCase().includes(s);if(y&&!m)return-1;if(!y&&m)return 1;const k=r.born||r.published||0,P=V.born||V.published||0;return k-P}))}else F(N,[])}),ye(),fe();var g=Pe(),L=A(g);G(L,"href",`${J??""}/people`);var R=c(L,2),W=c(n(R),2),U=n(W);Se(U),d(W);var se=c(W,2);{var ie=s=>{var T=ue(),X=A(T);{var r=y=>{var m=De(),k=n(m);xe(k,5,()=>a(N),p=>p.id,(p,o)=>{var u=$e();let $;var B=n(u),S=n(B),Y=n(S,!0);d(S);var D=c(S,2);let q;var Z=n(D,!0);d(D),d(B);var f=c(B,2),x=n(f,!0);d(f),d(u),M((v,E)=>{$=re(u,1,"result-item svelte-1334bia",null,$,v),G(u,"aria-label",`View details for ${a(o).displayName??""}`),w(Y,a(o).displayName),q=re(D,1,"result-type svelte-1334bia",null,q,E),w(Z,a(o).type),w(x,a(o).dateRange)},[()=>{var v;return{selected:((v=a(t))==null?void 0:v.id)===a(o).id}},()=>({book:a(o).type==="book"})],ae),H("click",u,()=>i(a(o))),H("keydown",u,v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),i(a(o)))}),_(p,u)}),d(k);var P=c(k,2),ve=n(P);{var oe=p=>{var o=Ve(),u=A(o),$=c(u,2),B=n($,!0);d($);var S=c($,2),Y=n(S);{var D=f=>{var x=Me(),v=A(x),E=c(v);{var ne=j=>{var ee=Ae(),ce=c(A(ee));M(()=>w(ce,`(${a(t).died-a(t).born} years old)`)),_(j,ee)};I(E,j=>{a(t).died&&a(t).born&&j(ne)})}M(()=>w(v,`${a(t).born||"?"} - ${a(t).died||"present"} `)),_(f,x)},q=f=>{var x=Re(),v=A(x),E=c(v,2);M(()=>{w(v,`Published: ${a(t).published??""}`),w(E,` Author: ${a(t).author??""}`)}),_(f,x)};I(Y,f=>{a(t).type==="person"?f(D):f(q,!1)})}d(S);var Z=c(S,2);M(f=>{G(u,"src",f),G(u,"alt",a(t).displayName),w(B,a(t).displayName)},[()=>Ce(a(t).image)],ae),H("click",Z,()=>C(a(t).type)),_(p,o)},de=p=>{var o=Be();_(p,o)};I(ve,p=>{a(t)?p(oe):p(de,!1)})}d(P),d(m),_(y,m)},V=y=>{var m=Ee(),k=n(m);d(m),M(()=>w(k,`No results found for "${a(l)??""}"`)),_(y,m)};I(X,y=>{a(N).length>0?y(r):y(V,!1)})}_(s,T)},le=s=>{var T=Ie();_(s,T)};I(se,s=>{a(l).trim()?s(ie):s(le,!1)})}d(R),Te(U,()=>a(l),s=>F(l,s)),_(e,g),we()}export{He as component};
