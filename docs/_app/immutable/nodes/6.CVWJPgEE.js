import{t as g,a as u,c as _e}from"../chunks/tV2K8-t_.js";import{i as me}from"../chunks/ByiRlZ4K.js";import{o as pe}from"../chunks/uz48rOOJ.js";import{a6 as ge,u as he,a7 as be,v as xe,p as ye,a3 as ke,a4 as we,Z as C,c as e,a as Ne,$ as n,a1 as i,m as K,k as A,a0 as v,_ as L,d as te}from"../chunks/WXaAkZrh.js";import{l as Se,s as x,e as O}from"../chunks/F6O-0aNN.js";import{i as D}from"../chunks/Bj7JGMQR.js";import{s as T,b as $e,e as Ce,r as Le}from"../chunks/CDM55lSx.js";import{s as se}from"../chunks/H7sH6bbh.js";import{b as E}from"../chunks/Bh0SCLq4.js";import{p as Te}from"../chunks/DuXwEttM.js";import{b as re}from"../chunks/Bnu58-W1.js";function Ve(a,h,f=h){var N=ge();Se(a,"input",r=>{var _=r?a.defaultValue:a.value;if(_=Q(a)?U(_):_,f(_),N&&_!==(_=h())){var F=a.selectionStart,V=a.selectionEnd;a.value=_??"",V!==null&&(a.selectionStart=F,a.selectionEnd=Math.min(V,a.value.length))}}),(xe&&a.defaultValue!==a.value||he(h)==null&&a.value)&&f(Q(a)?U(a.value):a.value),be(()=>{var r=h();Q(a)&&r===U(a.value)||a.type==="date"&&!r&&!a.value||r!==a.value&&(a.value=r??"")})}function Q(a){var h=a.type;return h==="number"||h==="range"}function U(a){return a===""?null:+a}var Me=g('<div role="button" tabindex="0"><div class="result-header svelte-4gn9x7"><div class="result-name svelte-4gn9x7"> </div> <div> </div></div> <div class="result-date svelte-4gn9x7"> </div></div>'),Pe=g("<br> ",1),Re=g(" <!>",1),Be=g(" <br> ",1),De=g('<img class="detail-image svelte-4gn9x7"> <div class="detail-name svelte-4gn9x7"> </div> <div class="detail-info svelte-4gn9x7"><!></div> <button class="view-timeline-btn svelte-4gn9x7">View in Timeline</button>',1),Ee=g('<div style="text-align: center; color: #666;">Click on a result to see details</div>'),qe=g('<div class="results-container svelte-4gn9x7"><div class="results-list svelte-4gn9x7"></div> <div class="detail-panel svelte-4gn9x7"><!></div></div>'),Ie=g('<div class="no-results svelte-4gn9x7"> </div>'),Ae=g('<div class="no-results svelte-4gn9x7">Start typing to search people and books...</div>'),Fe=g('<div class="navigation-controls svelte-4gn9x7"><a class="navigation-link svelte-4gn9x7" title="People Timeline">ðŸ‘¤</a> <a class="navigation-link svelte-4gn9x7" title="Books Timeline">ðŸ“š</a> <a class="navigation-link svelte-4gn9x7" title="List View">ðŸ“‹</a></div> <div class="search-page svelte-4gn9x7"><div class="header svelte-4gn9x7"><h1 class="title svelte-4gn9x7">Search Timeline</h1> <p class="subtitle svelte-4gn9x7">Find people and books across history</p></div> <div class="search-container svelte-4gn9x7"><input type="text" class="search-input svelte-4gn9x7" placeholder="Search for people, books, years..."></div> <!></div>',1);function Xe(a,h){ye(h,!1);let f=K(""),N=K([]),r=K(null);function _(s){A(r,s)}function F(s){s==="person"?window.location.href=`${E}/people`:window.location.href=`${E}/books`}pe(()=>{const s=document.querySelector(".search-input");s&&s.focus()}),ke(()=>(e(f),re),()=>{if(e(f).trim()){const s=e(f).toLowerCase(),S=Te.filter(t=>t.name.toLowerCase().includes(s)||t.born&&t.born.toString().includes(s)||t.died&&t.died.toString().includes(s)).map(t=>({...t,type:"person",displayName:t.name,dateRange:`${t.born||"?"} - ${t.died||"present"}`})),z=re.filter(t=>t.title.toLowerCase().includes(s)||t.author.toLowerCase().includes(s)||t.published&&t.published.toString().includes(s)).map(t=>({...t,type:"book",displayName:t.title,dateRange:`${t.published} â€¢ ${t.author}`}));A(N,[...S,...z].sort((t,M)=>{const b=t.displayName.toLowerCase().includes(s),m=M.displayName.toLowerCase().includes(s);if(b&&!m)return-1;if(!b&&m)return 1;const y=t.born||t.published||0,q=M.born||M.published||0;return y-q}))}else A(N,[])}),we(),me();var V=Fe(),Z=C(V),W=n(Z);T(W,"href",`${E??""}/people`);var X=i(W,2);T(X,"href",`${E??""}/books`);var le=i(X,2);T(le,"href",`${E??""}/list`),v(Z);var Y=i(Z,2),j=i(n(Y),2),ee=n(j);$e(ee),v(j);var ie=i(j,2);{var ve=s=>{var S=_e(),z=C(S);{var t=b=>{var m=qe(),y=n(m);Ce(y,5,()=>e(N),p=>p.id,(p,o)=>{var d=Me();let $;var P=n(d),k=n(P),G=n(k,!0);v(k);var R=i(k,2);let I;var H=n(R,!0);v(R),v(P);var c=i(P,2),w=n(c,!0);v(c),v(d),L((l,B)=>{$=se(d,1,"result-item svelte-4gn9x7",null,$,l),T(d,"aria-label",`View details for ${e(o).displayName??""}`),x(G,e(o).displayName),I=se(R,1,"result-type svelte-4gn9x7",null,I,B),x(H,e(o).type),x(w,e(o).dateRange)},[()=>{var l;return{selected:((l=e(r))==null?void 0:l.id)===e(o).id}},()=>({book:e(o).type==="book"})],te),O("click",d,()=>_(e(o))),O("keydown",d,l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),_(e(o)))}),u(p,d)}),v(y);var q=i(y,2),ne=n(q);{var de=p=>{var o=De(),d=C(o),$=i(d,2),P=n($,!0);v($);var k=i($,2),G=n(k);{var R=c=>{var w=Re(),l=C(w),B=i(l);{var ue=J=>{var ae=Pe(),fe=i(C(ae));L(()=>x(fe,`(${e(r).died-e(r).born} years old)`)),u(J,ae)};D(B,J=>{e(r).died&&e(r).born&&J(ue)})}L(()=>x(l,`${e(r).born||"?"} - ${e(r).died||"present"} `)),u(c,w)},I=c=>{var w=Be(),l=C(w),B=i(l,2);L(()=>{x(l,`Published: ${e(r).published??""}`),x(B,` Author: ${e(r).author??""}`)}),u(c,w)};D(G,c=>{e(r).type==="person"?c(R):c(I,!1)})}v(k);var H=i(k,2);L(c=>{T(d,"src",c),T(d,"alt",e(r).displayName),x(P,e(r).displayName)},[()=>Le(e(r).image)],te),O("click",H,()=>F(e(r).type)),u(p,o)},ce=p=>{var o=Ee();u(p,o)};D(ne,p=>{e(r)?p(de):p(ce,!1)})}v(q),v(m),u(b,m)},M=b=>{var m=Ie(),y=n(m);v(m),L(()=>x(y,`No results found for "${e(f)??""}"`)),u(b,m)};D(z,b=>{e(N).length>0?b(t):b(M,!1)})}u(s,S)},oe=s=>{var S=Ae();u(s,S)};D(ie,s=>{e(f).trim()?s(ve):s(oe,!1)})}v(Y),Ve(ee,()=>e(f),s=>A(f,s)),u(a,V),Ne()}export{Xe as component};
