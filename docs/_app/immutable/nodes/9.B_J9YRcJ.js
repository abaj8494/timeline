import{t as u,a as l,c as Me}from"../chunks/CB0lZw64.js";import{i as Re}from"../chunks/36iwJYuS.js";import{a9 as Ae,u as Ve,aa as De,h as Fe,p as Be,o as Ee,T as Pe,V as qe,a0 as h,e as a,a as ze,Y as c,n as le,m as Q,X as o,$ as n,W as y,d as U}from"../chunks/EIGgl-ut.js";import{l as Ie,s as f,e as ve}from"../chunks/CBrunzHD.js";import{i as b}from"../chunks/BZLUw1rn.js";import{N as je,r as Ge,e as He,a as he,s as ne}from"../chunks/Diwdagdi.js";import{b as F}from"../chunks/CxPMDySm.js";import{p as We}from"../chunks/6MVkoVXB.js";import{b as Xe}from"../chunks/Bnu58-W1.js";import{a as Ye}from"../chunks/bDAMAx1S.js";import{c as Je}from"../chunks/DReY6xBh.js";import{h as we}from"../chunks/Damhf_p7.js";import{r as Ke}from"../chunks/D1ktBid4.js";function Oe(s,k,w=k){var V=Ae();Ie(s,"input",r=>{var _=r?s.defaultValue:s.value;if(_=ue(s)?de(_):_,w(_),V&&_!==(_=k())){var G=s.selectionStart,H=s.selectionEnd;s.value=_??"",H!==null&&(s.selectionStart=G,s.selectionEnd=Math.min(H,s.value.length))}}),(Fe&&s.defaultValue!==s.value||Ve(k)==null&&s.value)&&w(ue(s)?de(s.value):s.value),De(()=>{var r=k();ue(s)&&r===de(s.value)||s.type==="date"&&!r&&!s.value||r!==s.value&&(s.value=r??"")})}function ue(s){var k=s.type;return k==="number"||k==="range"}function de(s){return s===""?null:+s}var Qe=u('<div role="button" tabindex="0"><div class="result-header svelte-15usru4"><div class="result-name svelte-15usru4"> </div> <div> </div></div> <div class="result-date svelte-15usru4"> </div></div>'),Ue=u('<img class="detail-image svelte-15usru4">'),Ze=u("<br> ",1),ea=u(" <!>",1),aa=u(" <br> ",1),ta=u(" <br> ",1),ra=u('<br><span style="color: #ccc; font-size: 0.9rem;"> </span>',1),sa=u('<br><span style="color: #888;"> </span>',1),oa=u('<br><span style="color: #FA6742; font-size: 0.85rem;"> </span>',1),ia=u(" <!> <!> <!>",1),la=u('<!> <div class="detail-name svelte-15usru4"> </div> <div class="detail-info svelte-15usru4"><!></div> <button class="view-timeline-btn svelte-15usru4">View in Timeline</button>',1),va=u('<div style="text-align: center; color: #666;">Click on a result to see details</div>'),na=u('<div class="results-container svelte-15usru4"><div class="results-list svelte-15usru4"></div> <div class="detail-panel svelte-15usru4"><!></div></div>'),ua=u('<div class="no-results svelte-15usru4"> </div>'),da=u('<div class="no-results svelte-15usru4">Start typing to search people and books...</div>'),ca=u('<!> <div class="search-page svelte-15usru4"><div class="header svelte-15usru4"><h1 class="title svelte-15usru4">Search Timeline</h1> <p class="subtitle svelte-15usru4">Find people, books, artworks, and events across history</p></div> <div class="search-container svelte-15usru4"><input type="text" class="search-input svelte-15usru4" placeholder="Search for people, books, years..."></div> <!></div>',1);function Na(s,k){Be(k,!1);let w=le(""),V=le([]),r=le(null);function _(t){const g=Math.abs(t);return g>=1e9?`${(t/1e9).toFixed(1)} Ga`:g>=1e6?`${(t/1e6).toFixed(1)} Ma`:t<0?`${Math.abs(t)} BC`:`${t} AD`}function G(t){Q(r,t)}function H(t){const g={person:`${F}/people`,book:`${F}/books`,artwork:`${F}/artworks`,cosmic:`${F}/cosmic`,humanity:`${F}/humanity`};window.location.href=g[t]||`${F}/`}Ee(()=>{const t=document.querySelector(".search-input");t&&t.focus()}),Pe(()=>(a(w),we),()=>{if(a(w).trim()){const t=a(w).toLowerCase(),g=We.filter(e=>e.name.toLowerCase().includes(t)||e.born&&e.born.toString().includes(t)||e.died&&e.died.toString().includes(t)).map(e=>({...e,type:"person",displayName:e.name,dateRange:`${e.born||"?"} - ${e.died||"present"}`})),ee=Xe.filter(e=>e.title.toLowerCase().includes(t)||e.author.toLowerCase().includes(t)||e.published&&e.published.toString().includes(t)).map(e=>({...e,type:"book",displayName:e.title,dateRange:`${e.published} • ${e.author}`})),ae=Ye.filter(e=>e.title.toLowerCase().includes(t)||e.artist.toLowerCase().includes(t)||e.created&&e.created.toString().includes(t)).map(e=>({...e,type:"artwork",displayName:e.title,dateRange:`${e.created} • ${e.artist}`})),te=Je.filter(e=>e.title.toLowerCase().includes(t)||e.subtitle&&e.subtitle.toLowerCase().includes(t)||e.tags&&e.tags.some(d=>d.toLowerCase().includes(t))).map(e=>({...e,type:"cosmic",displayName:e.title,dateRange:e.labelTime||_(e.start)})),$=we.filter(e=>e.title.toLowerCase().includes(t)||e.subtitle&&e.subtitle.toLowerCase().includes(t)||e.tags&&e.tags.some(d=>d.toLowerCase().includes(t))||e.region&&e.region.toLowerCase().includes(t)).map(e=>({...e,type:"humanity",displayName:e.title,dateRange:e.region?`${_(e.start)} • ${e.region}`:_(e.start)}));Q(V,[...g,...ee,...ae,...te,...$].sort((e,d)=>{const B=e.displayName.toLowerCase().includes(t),W=d.displayName.toLowerCase().includes(t);if(B&&!W)return-1;if(!B&&W)return 1;const re=e.born||e.published||e.created||e.start||0,se=d.born||d.published||d.created||d.start||0;return re-se}))}else Q(V,[])}),qe(),Re();var ce=ca(),fe=h(ce);je(fe,{});var me=o(fe,2),Z=o(c(me),2),_e=c(Z);Ge(_e),n(Z);var xe=o(Z,2);{var Ce=t=>{var g=Me(),ee=h(g);{var ae=$=>{var e=na(),d=c(e);He(d,5,()=>a(V),x=>x.id,(x,v)=>{var C=Qe();let X;var R=c(C),E=c(R),P=c(E,!0);n(E);var q=o(E,2);let Y;var oe=c(q,!0);n(q),n(R);var J=o(R,2),p=c(J,!0);n(J),n(C),y((i,N)=>{X=he(C,1,"result-item svelte-15usru4",null,X,i),ne(C,"aria-label",`View details for ${a(v).displayName??""}`),f(P,a(v).displayName),Y=he(q,1,"result-type svelte-15usru4",null,Y,N),f(oe,a(v).type),f(p,a(v).dateRange)},[()=>{var i;return{selected:((i=a(r))==null?void 0:i.id)===a(v).id}},()=>({book:a(v).type==="book",artwork:a(v).type==="artwork",cosmic:a(v).type==="cosmic",humanity:a(v).type==="humanity"})],U),ve("click",C,()=>G(a(v))),ve("keydown",C,i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),G(a(v)))}),l(x,C)}),n(d);var B=o(d,2),W=c(B);{var re=x=>{var v=la(),C=h(v);{var X=p=>{var i=Ue();y(N=>{ne(i,"src",N),ne(i,"alt",a(r).displayName)},[()=>Ke(a(r).image)],U),l(p,i)};b(C,p=>{a(r).image&&p(X)})}var R=o(C,2),E=c(R,!0);n(R);var P=o(R,2),q=c(P);{var Y=p=>{var i=ea(),N=h(i),ie=o(N);{var L=S=>{var A=Ze(),z=o(h(A));y(()=>f(z,`(${a(r).died-a(r).born} years old)`)),l(S,A)};b(ie,S=>{a(r).died&&a(r).born&&S(L)})}y(()=>f(N,`${a(r).born||"?"} - ${a(r).died||"present"} `)),l(p,i)},oe=(p,i)=>{{var N=L=>{var S=aa(),A=h(S),z=o(A,2);y(()=>{f(A,`Published: ${a(r).published??""}`),f(z,` Author: ${a(r).author??""}`)}),l(L,S)},ie=(L,S)=>{{var A=D=>{var K=ta(),O=h(K),I=o(O,2);y(()=>{f(O,`Created: ${a(r).created??""}`),f(I,` Artist: ${a(r).artist??""}`)}),l(D,K)},z=(D,K)=>{{var O=I=>{var pe=ia(),ye=h(pe),be=o(ye);{var $e=m=>{var T=ra(),M=o(h(T)),j=c(M,!0);n(M),y(()=>f(j,a(r).subtitle)),l(m,T)};b(be,m=>{a(r).subtitle&&m($e)})}var ge=o(be,2);{var Ne=m=>{var T=sa(),M=o(h(T)),j=c(M,!0);n(M),y(()=>f(j,a(r).region)),l(m,T)};b(ge,m=>{a(r).region&&m(Ne)})}var Le=o(ge,2);{var Se=m=>{var T=oa(),M=o(h(T)),j=c(M,!0);n(M),y(Te=>f(j,Te),[()=>a(r).tags.join(", ")],U),l(m,T)};b(Le,m=>{a(r).tags&&a(r).tags.length>0&&m(Se)})}y(m=>f(ye,`${m??""} `),[()=>a(r).labelTime||_(a(r).start)],U),l(I,pe)};b(D,I=>{(a(r).type==="cosmic"||a(r).type==="humanity")&&I(O)},K)}};b(L,D=>{a(r).type==="artwork"?D(A):D(z,!1)},S)}};b(p,L=>{a(r).type==="book"?L(N):L(ie,!1)},i)}};b(q,p=>{a(r).type==="person"?p(Y):p(oe,!1)})}n(P);var J=o(P,2);y(()=>f(E,a(r).displayName)),ve("click",J,()=>H(a(r).type)),l(x,v)},se=x=>{var v=va();l(x,v)};b(W,x=>{a(r)?x(re):x(se,!1)})}n(B),n(e),l($,e)},te=$=>{var e=ua(),d=c(e);n(e),y(()=>f(d,`No results found for "${a(w)??""}"`)),l($,e)};b(ee,$=>{a(V).length>0?$(ae):$(te,!1)})}l(t,g)},ke=t=>{var g=da();l(t,g)};b(xe,t=>{a(w).trim()?t(Ce):t(ke,!1)})}n(me),Oe(_e,()=>a(w),t=>Q(w,t)),l(s,ce),ze()}export{Na as component};
