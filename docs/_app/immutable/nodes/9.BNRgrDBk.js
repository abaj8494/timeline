import{t as c,a as o,c as Fe}from"../chunks/CXO4SUQH.js";import{i as Pe}from"../chunks/CCMQ1FqB.js";import{o as Ee}from"../chunks/UKlZL6Oz.js";import{a7 as qe,u as ze,a8 as He,h as Ie,p as je,O as Ge,Q as Oe,Z as x,e as a,a as Qe,V as d,T as i,n as ve,m as W,Y as n,R as g,d as X}from"../chunks/CbWlX3Uk.js";import{l as Ye,s as u,e as de}from"../chunks/D2Q5qIZK.js";import{i as h}from"../chunks/C8t1nucw.js";import{s as L,r as Ze,e as Je}from"../chunks/CN872F4n.js";import{s as Ce}from"../chunks/B280O7N3.js";import{b as y}from"../chunks/MrAQXxzP.js";import{p as Ke}from"../chunks/DuXwEttM.js";import{b as Ue}from"../chunks/Bnu58-W1.js";import{a as We}from"../chunks/bDAMAx1S.js";import{c as Xe}from"../chunks/DReY6xBh.js";import{h as Le}from"../chunks/Damhf_p7.js";import{r as ea}from"../chunks/BdMFXu6Q.js";function aa(r,C,k=C){var D=qe();Ye(r,"input",s=>{var _=s?r.defaultValue:r.value;if(_=ce(r)?me(_):_,k(_),D&&_!==(_=C())){var G=r.selectionStart,O=r.selectionEnd;r.value=_??"",O!==null&&(r.selectionStart=G,r.selectionEnd=Math.min(O,r.value.length))}}),(Ie&&r.defaultValue!==r.value||ze(C)==null&&r.value)&&k(ce(r)?me(r.value):r.value),He(()=>{var s=C();ce(r)&&s===me(r.value)||r.type==="date"&&!s&&!r.value||s!==r.value&&(r.value=s??"")})}function ce(r){var C=r.type;return C==="number"||C==="range"}function me(r){return r===""?null:+r}var ta=c('<div role="button" tabindex="0"><div class="result-header svelte-dx14sm"><div class="result-name svelte-dx14sm"> </div> <div> </div></div> <div class="result-date svelte-dx14sm"> </div></div>'),sa=c('<img class="detail-image svelte-dx14sm">'),ra=c("<br> ",1),ia=c(" <!>",1),la=c(" <br> ",1),oa=c(" <br> ",1),na=c('<br><span style="color: #ccc; font-size: 0.9rem;"> </span>',1),va=c('<br><span style="color: #888;"> </span>',1),da=c('<br><span style="color: #FA6742; font-size: 0.85rem;"> </span>',1),ca=c(" <!> <!> <!>",1),ma=c('<!> <div class="detail-name svelte-dx14sm"> </div> <div class="detail-info svelte-dx14sm"><!></div> <button class="view-timeline-btn svelte-dx14sm">View in Timeline</button>',1),ua=c('<div style="text-align: center; color: #666;">Click on a result to see details</div>'),fa=c('<div class="results-container svelte-dx14sm"><div class="results-list svelte-dx14sm"></div> <div class="detail-panel svelte-dx14sm"><!></div></div>'),_a=c('<div class="no-results svelte-dx14sm"> </div>'),pa=c('<div class="no-results svelte-dx14sm">Start typing to search people and books...</div>'),ga=c('<div class="navigation-controls svelte-dx14sm"><a class="navigation-link svelte-dx14sm" title="Cosmic Timeline">ğŸŒŒ</a> <a class="navigation-link svelte-dx14sm" title="Humanity Timeline">ğŸŒ</a> <a class="navigation-link svelte-dx14sm" title="People Timeline">ğŸ‘¤</a> <a class="navigation-link svelte-dx14sm" title="Books Timeline">ğŸ“š</a> <a class="navigation-link svelte-dx14sm" title="Artworks Timeline">ğŸ¨</a> <a class="navigation-link svelte-dx14sm" title="List View">ğŸ“‹</a></div> <div class="search-page svelte-dx14sm"><div class="header svelte-dx14sm"><h1 class="title svelte-dx14sm">Search Timeline</h1> <p class="subtitle svelte-dx14sm">Find people, books, artworks, and events across history</p></div> <div class="search-container svelte-dx14sm"><input type="text" class="search-input svelte-dx14sm" placeholder="Search for people, books, years..."></div> <!></div>',1);function Va(r,C){je(C,!1);let k=ve(""),D=ve([]),s=ve(null);function _(t){const b=Math.abs(t);return b>=1e9?`${(t/1e9).toFixed(1)} Ga`:b>=1e6?`${(t/1e6).toFixed(1)} Ma`:t<0?`${Math.abs(t)} BC`:`${t} AD`}function G(t){W(s,t)}function O(t){const b={person:`${y}/people`,book:`${y}/books`,artwork:`${y}/artworks`,cosmic:`${y}/cosmic`,humanity:`${y}/humanity`};window.location.href=b[t]||`${y}/`}Ee(()=>{const t=document.querySelector(".search-input");t&&t.focus()}),Ge(()=>(a(k),Le),()=>{if(a(k).trim()){const t=a(k).toLowerCase(),b=Ke.filter(e=>e.name.toLowerCase().includes(t)||e.born&&e.born.toString().includes(t)||e.died&&e.died.toString().includes(t)).map(e=>({...e,type:"person",displayName:e.name,dateRange:`${e.born||"?"} - ${e.died||"present"}`})),te=Ue.filter(e=>e.title.toLowerCase().includes(t)||e.author.toLowerCase().includes(t)||e.published&&e.published.toString().includes(t)).map(e=>({...e,type:"book",displayName:e.title,dateRange:`${e.published} â€¢ ${e.author}`})),se=We.filter(e=>e.title.toLowerCase().includes(t)||e.artist.toLowerCase().includes(t)||e.created&&e.created.toString().includes(t)).map(e=>({...e,type:"artwork",displayName:e.title,dateRange:`${e.created} â€¢ ${e.artist}`})),re=Xe.filter(e=>e.title.toLowerCase().includes(t)||e.subtitle&&e.subtitle.toLowerCase().includes(t)||e.tags&&e.tags.some(m=>m.toLowerCase().includes(t))).map(e=>({...e,type:"cosmic",displayName:e.title,dateRange:e.labelTime||_(e.start)})),T=Le.filter(e=>e.title.toLowerCase().includes(t)||e.subtitle&&e.subtitle.toLowerCase().includes(t)||e.tags&&e.tags.some(m=>m.toLowerCase().includes(t))||e.region&&e.region.toLowerCase().includes(t)).map(e=>({...e,type:"humanity",displayName:e.title,dateRange:e.region?`${_(e.start)} â€¢ ${e.region}`:_(e.start)}));W(D,[...b,...te,...se,...re,...T].sort((e,m)=>{const P=e.displayName.toLowerCase().includes(t),Q=m.displayName.toLowerCase().includes(t);if(P&&!Q)return-1;if(!P&&Q)return 1;const ie=e.born||e.published||e.created||e.start||0,le=m.born||m.published||m.created||m.start||0;return ie-le}))}else W(D,[])}),Oe(),Pe();var ue=ga(),ee=x(ue),fe=d(ee);L(fe,"href",`${y??""}/cosmic`);var _e=i(fe,2);L(_e,"href",`${y??""}/humanity`);var pe=i(_e,2);L(pe,"href",`${y??""}/people`);var ge=i(pe,2);L(ge,"href",`${y??""}/books`);var he=i(ge,2);L(he,"href",`${y??""}/artworks`);var Te=i(he,2);L(Te,"href",`${y??""}/list`),n(ee);var ye=i(ee,2),ae=i(d(ye),2),be=d(ae);Ze(be),n(ae);var Ne=i(ae,2);{var Se=t=>{var b=Fe(),te=x(b);{var se=T=>{var e=fa(),m=d(e);Je(m,5,()=>a(D),w=>w.id,(w,v)=>{var $=ta();let Y;var V=d($),E=d(V),q=d(E,!0);n(E);var z=i(E,2);let Z;var oe=d(z,!0);n(z),n(V);var J=i(V,2),p=d(J,!0);n(J),n($),g((l,N)=>{Y=Ce($,1,"result-item svelte-dx14sm",null,Y,l),L($,"aria-label",`View details for ${a(v).displayName??""}`),u(q,a(v).displayName),Z=Ce(z,1,"result-type svelte-dx14sm",null,Z,N),u(oe,a(v).type),u(p,a(v).dateRange)},[()=>{var l;return{selected:((l=a(s))==null?void 0:l.id)===a(v).id}},()=>({book:a(v).type==="book",artwork:a(v).type==="artwork",cosmic:a(v).type==="cosmic",humanity:a(v).type==="humanity"})],X),de("click",$,()=>G(a(v))),de("keydown",$,l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),G(a(v)))}),o(w,$)}),n(m);var P=i(m,2),Q=d(P);{var ie=w=>{var v=ma(),$=x(v);{var Y=p=>{var l=sa();g(N=>{L(l,"src",N),L(l,"alt",a(s).displayName)},[()=>ea(a(s).image)],X),o(p,l)};h($,p=>{a(s).image&&p(Y)})}var V=i($,2),E=d(V,!0);n(V);var q=i(V,2),z=d(q);{var Z=p=>{var l=ia(),N=x(l),ne=i(N);{var S=R=>{var B=ra(),H=i(x(B));g(()=>u(H,`(${a(s).died-a(s).born} years old)`)),o(R,B)};h(ne,R=>{a(s).died&&a(s).born&&R(S)})}g(()=>u(N,`${a(s).born||"?"} - ${a(s).died||"present"} `)),o(p,l)},oe=(p,l)=>{{var N=S=>{var R=la(),B=x(R),H=i(B,2);g(()=>{u(B,`Published: ${a(s).published??""}`),u(H,` Author: ${a(s).author??""}`)}),o(S,R)},ne=(S,R)=>{{var B=F=>{var K=oa(),U=x(K),I=i(U,2);g(()=>{u(U,`Created: ${a(s).created??""}`),u(I,` Artist: ${a(s).artist??""}`)}),o(F,K)},H=(F,K)=>{{var U=I=>{var xe=ca(),ke=x(xe),we=i(ke);{var Me=f=>{var M=na(),A=i(x(M)),j=d(A,!0);n(A),g(()=>u(j,a(s).subtitle)),o(f,M)};h(we,f=>{a(s).subtitle&&f(Me)})}var $e=i(we,2);{var Ae=f=>{var M=va(),A=i(x(M)),j=d(A,!0);n(A),g(()=>u(j,a(s).region)),o(f,M)};h($e,f=>{a(s).region&&f(Ae)})}var Ve=i($e,2);{var Be=f=>{var M=da(),A=i(x(M)),j=d(A,!0);n(A),g(De=>u(j,De),[()=>a(s).tags.join(", ")],X),o(f,M)};h(Ve,f=>{a(s).tags&&a(s).tags.length>0&&f(Be)})}g(f=>u(ke,`${f??""} `),[()=>a(s).labelTime||_(a(s).start)],X),o(I,xe)};h(F,I=>{(a(s).type==="cosmic"||a(s).type==="humanity")&&I(U)},K)}};h(S,F=>{a(s).type==="artwork"?F(B):F(H,!1)},R)}};h(p,S=>{a(s).type==="book"?S(N):S(ne,!1)},l)}};h(z,p=>{a(s).type==="person"?p(Z):p(oe,!1)})}n(q);var J=i(q,2);g(()=>u(E,a(s).displayName)),de("click",J,()=>O(a(s).type)),o(w,v)},le=w=>{var v=ua();o(w,v)};h(Q,w=>{a(s)?w(ie):w(le,!1)})}n(P),n(e),o(T,e)},re=T=>{var e=_a(),m=d(e);n(e),g(()=>u(m,`No results found for "${a(k)??""}"`)),o(T,e)};h(te,T=>{a(D).length>0?T(se):T(re,!1)})}o(t,b)},Re=t=>{var b=pa();o(t,b)};h(Ne,t=>{a(k).trim()?t(Se):t(Re,!1)})}n(ye),aa(be,()=>a(k),t=>W(k,t)),o(r,ue),Qe()}export{Va as component};
