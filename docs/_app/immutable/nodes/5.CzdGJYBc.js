import{t as p,a as u,c as ue}from"../chunks/BIYvNW0b.js";import{i as fe}from"../chunks/14nf3aC0.js";import{h as O,a3 as _e,A as me,a4 as be,p as pe,o as he,a0 as ge,a1 as ye,W as A,x as a,a as Ne,Y as o,I as j,G as F,_ as d,Z as v,X as M,u as ee}from"../chunks/CSOfU5Pt.js";import{l as we,s as N,e as ae}from"../chunks/vckkWNzg.js";import{i as q}from"../chunks/DBxt3fiE.js";import{a as ke,s as z,b as Se,e as xe,r as Ce}from"../chunks/D2bpMces.js";import{b as H}from"../chunks/B0pP26k0.js";import{p as Le}from"../chunks/BC6XuepY.js";import{b as te}from"../chunks/Bnu58-W1.js";function se(e,f,l,w,t,i){var C=e.__className;if(O||C!==l||C===void 0){var h=ke(l,w,i);(!O||h!==e.getAttribute("class"))&&(h==null?e.removeAttribute("class"):e.className=h),e.__className=l}else if(i&&t!==i)for(var L in i){var R=!!i[L];(t==null||R!==!!t[L])&&e.classList.toggle(L,R)}return i}function Te(e,f,l=f){var w=_e();we(e,"input",t=>{var i=t?e.defaultValue:e.value;if(i=J(e)?K(i):i,l(i),w&&i!==(i=f())){var C=e.selectionStart,h=e.selectionEnd;e.value=i??"",h!==null&&(e.selectionStart=C,e.selectionEnd=Math.min(h,e.value.length))}}),(O&&e.defaultValue!==e.value||me(f)==null&&e.value)&&l(J(e)?K(e.value):e.value),be(()=>{var t=f();J(e)&&t===K(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function J(e){var f=e.type;return f==="number"||f==="range"}function K(e){return e===""?null:+e}var $e=p('<div><div class="result-header svelte-1334bia"><div class="result-name svelte-1334bia"> </div> <div> </div></div> <div class="result-date svelte-1334bia"> </div></div>'),Ae=p("<br> ",1),Me=p(" <!>",1),Re=p(" <br> ",1),Be=p('<img class="detail-image svelte-1334bia"> <div class="detail-name svelte-1334bia"> </div> <div class="detail-info svelte-1334bia"><!></div> <button class="view-timeline-btn svelte-1334bia">View in Timeline</button>',1),Ie=p('<div style="text-align: center; color: #666;">Click on a result to see details</div>'),Pe=p('<div class="results-container svelte-1334bia"><div class="results-list svelte-1334bia"></div> <div class="detail-panel svelte-1334bia"><!></div></div>'),Ve=p('<div class="no-results svelte-1334bia"> </div>'),qe=p('<div class="no-results svelte-1334bia">Start typing to search people and books...</div>'),De=p('<a class="navigation-link svelte-1334bia" title="Back to Timeline">⏪</a> <div class="search-page svelte-1334bia"><div class="header svelte-1334bia"><h1 class="title svelte-1334bia">Search Timeline</h1> <p class="subtitle svelte-1334bia">Find people and books across history</p></div> <div class="search-container svelte-1334bia"><input type="text" class="search-input svelte-1334bia" placeholder="Search for people, books, years..."></div> <!></div>',1);function He(e,f){pe(f,!1);let l=j(""),w=j([]),t=j(null);function i(r){F(t,r)}function C(r){r==="person"?window.location.href=`${H}/people`:window.location.href=`${H}/books`}he(()=>{const r=document.querySelector(".search-input");r&&r.focus()}),ge(()=>(a(l),te),()=>{if(a(l).trim()){const r=a(l).toLowerCase(),T=Le.filter(s=>s.name.toLowerCase().includes(r)||s.born&&s.born.toString().includes(r)||s.died&&s.died.toString().includes(r)).map(s=>({...s,type:"person",displayName:s.name,dateRange:`${s.born||"?"} - ${s.died||"present"}`})),W=te.filter(s=>s.title.toLowerCase().includes(r)||s.author.toLowerCase().includes(r)||s.published&&s.published.toString().includes(r)).map(s=>({...s,type:"book",displayName:s.title,dateRange:`${s.published} • ${s.author}`}));F(w,[...T,...W].sort((s,B)=>{const g=s.displayName.toLowerCase().includes(r),_=B.displayName.toLowerCase().includes(r);if(g&&!_)return-1;if(!g&&_)return 1;const k=s.born||s.published||0,D=B.born||B.published||0;return k-D}))}else F(w,[])}),ye(),fe();var h=De(),L=A(h);z(L,"href",`${H??""}/people`);var R=d(L,2),G=d(o(R),2),Q=o(G);Se(Q),v(G);var re=d(G,2);{var ie=r=>{var T=ue(),W=A(T);{var s=g=>{var _=Pe(),k=o(_);xe(k,5,()=>a(w),m=>m.id,(m,n)=>{var y=$e();let $;var I=o(y),S=o(I),X=o(S,!0);v(S);var P=d(S,2);let E;var Y=o(P,!0);v(P),v(I);var c=d(I,2),x=o(c,!0);v(c),v(y),M((b,V)=>{$=se(y,1,"result-item svelte-1334bia",null,$,b),N(X,a(n).displayName),E=se(P,1,"result-type svelte-1334bia",null,E,V),N(Y,a(n).type),N(x,a(n).dateRange)},[()=>{var b;return{selected:((b=a(t))==null?void 0:b.id)===a(n).id}},()=>({book:a(n).type==="book"})],ee),ae("click",y,()=>i(a(n))),u(m,y)}),v(k);var D=d(k,2),ve=o(D);{var oe=m=>{var n=Be(),y=A(n),$=d(y,2),I=o($,!0);v($);var S=d($,2),X=o(S);{var P=c=>{var x=Me(),b=A(x),V=d(b);{var ne=Z=>{var U=Ae(),ce=d(A(U));M(()=>N(ce,`(${a(t).died-a(t).born} years old)`)),u(Z,U)};q(V,Z=>{a(t).died&&a(t).born&&Z(ne)})}M(()=>N(b,`${a(t).born||"?"} - ${a(t).died||"present"} `)),u(c,x)},E=c=>{var x=Re(),b=A(x),V=d(b,2);M(()=>{N(b,`Published: ${a(t).published??""}`),N(V,` Author: ${a(t).author??""}`)}),u(c,x)};q(X,c=>{a(t).type==="person"?c(P):c(E,!1)})}v(S);var Y=d(S,2);M(c=>{z(y,"src",c),z(y,"alt",a(t).displayName),N(I,a(t).displayName)},[()=>Ce(a(t).image)],ee),ae("click",Y,()=>C(a(t).type)),u(m,n)},de=m=>{var n=Ie();u(m,n)};q(ve,m=>{a(t)?m(oe):m(de,!1)})}v(D),v(_),u(g,_)},B=g=>{var _=Ve(),k=o(_);v(_),M(()=>N(k,`No results found for "${a(l)??""}"`)),u(g,_)};q(W,g=>{a(w).length>0?g(s):g(B,!1)})}u(r,T)},le=r=>{var T=qe();u(r,T)};q(re,r=>{a(l).trim()?r(ie):r(le,!1)})}v(R),Te(Q,()=>a(l),r=>F(l,r)),u(e,h),Ne()}export{He as component};
