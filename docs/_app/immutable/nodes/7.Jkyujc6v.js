import{t as h,a as u,c as _e}from"../chunks/tV2K8-t_.js";import{i as me}from"../chunks/ByiRlZ4K.js";import{o as he}from"../chunks/uz48rOOJ.js";import{a6 as we,u as be,a7 as ge,v as ye,p as ke,a3 as xe,a4 as Ne,Z as C,c as e,a as $e,$ as n,a1 as l,m as K,k as I,a0 as v,_ as L,d as se}from"../chunks/WXaAkZrh.js";import{l as Se,s as g,e as O}from"../chunks/F6O-0aNN.js";import{i as E}from"../chunks/Bj7JGMQR.js";import{s as N,b as Te,e as Ce,r as Le}from"../chunks/DrBpmEm4.js";import{s as re}from"../chunks/BsnCxmFX.js";import{b as V}from"../chunks/D-pzx4Jl.js";import{p as Ve}from"../chunks/DuXwEttM.js";import{b as le}from"../chunks/Bnu58-W1.js";function Me(t,w,p=w){var $=we();Se(t,"input",r=>{var f=r?t.defaultValue:t.value;if(f=Q(t)?U(f):f,p(f),$&&f!==(f=w())){var F=t.selectionStart,M=t.selectionEnd;t.value=f??"",M!==null&&(t.selectionStart=F,t.selectionEnd=Math.min(M,t.value.length))}}),(ye&&t.defaultValue!==t.value||be(w)==null&&t.value)&&p(Q(t)?U(t.value):t.value),ge(()=>{var r=w();Q(t)&&r===U(t.value)||t.type==="date"&&!r&&!t.value||r!==t.value&&(t.value=r??"")})}function Q(t){var w=t.type;return w==="number"||w==="range"}function U(t){return t===""?null:+t}var Pe=h('<div role="button" tabindex="0"><div class="result-header svelte-tsp8tw"><div class="result-name svelte-tsp8tw"> </div> <div> </div></div> <div class="result-date svelte-tsp8tw"> </div></div>'),Re=h("<br> ",1),Be=h(" <!>",1),De=h(" <br> ",1),Ee=h('<img class="detail-image svelte-tsp8tw"> <div class="detail-name svelte-tsp8tw"> </div> <div class="detail-info svelte-tsp8tw"><!></div> <button class="view-timeline-btn svelte-tsp8tw">View in Timeline</button>',1),qe=h('<div style="text-align: center; color: #666;">Click on a result to see details</div>'),Ae=h('<div class="results-container svelte-tsp8tw"><div class="results-list svelte-tsp8tw"></div> <div class="detail-panel svelte-tsp8tw"><!></div></div>'),Ie=h('<div class="no-results svelte-tsp8tw"> </div>'),Fe=h('<div class="no-results svelte-tsp8tw">Start typing to search people and books...</div>'),Ze=h('<div class="navigation-controls svelte-tsp8tw"><a class="navigation-link svelte-tsp8tw" title="People Timeline">ðŸ‘¤</a> <a class="navigation-link svelte-tsp8tw" title="Books Timeline">ðŸ“š</a> <a class="navigation-link svelte-tsp8tw" title="Artworks Timeline">ðŸŽ¨</a> <a class="navigation-link svelte-tsp8tw" title="List View">ðŸ“‹</a></div> <div class="search-page svelte-tsp8tw"><div class="header svelte-tsp8tw"><h1 class="title svelte-tsp8tw">Search Timeline</h1> <p class="subtitle svelte-tsp8tw">Find people and books across history</p></div> <div class="search-container svelte-tsp8tw"><input type="text" class="search-input svelte-tsp8tw" placeholder="Search for people, books, years..."></div> <!></div>',1);function Ye(t,w){ke(w,!1);let p=K(""),$=K([]),r=K(null);function f(s){I(r,s)}function F(s){s==="person"?window.location.href=`${V}/people`:window.location.href=`${V}/books`}he(()=>{const s=document.querySelector(".search-input");s&&s.focus()}),xe(()=>(e(p),le),()=>{if(e(p).trim()){const s=e(p).toLowerCase(),S=Ve.filter(a=>a.name.toLowerCase().includes(s)||a.born&&a.born.toString().includes(s)||a.died&&a.died.toString().includes(s)).map(a=>({...a,type:"person",displayName:a.name,dateRange:`${a.born||"?"} - ${a.died||"present"}`})),z=le.filter(a=>a.title.toLowerCase().includes(s)||a.author.toLowerCase().includes(s)||a.published&&a.published.toString().includes(s)).map(a=>({...a,type:"book",displayName:a.title,dateRange:`${a.published} â€¢ ${a.author}`}));I($,[...S,...z].sort((a,P)=>{const b=a.displayName.toLowerCase().includes(s),_=P.displayName.toLowerCase().includes(s);if(b&&!_)return-1;if(!b&&_)return 1;const y=a.born||a.published||0,q=P.born||P.published||0;return y-q}))}else I($,[])}),Ne(),me();var M=Ze(),Z=C(M),W=n(Z);N(W,"href",`${V??""}/people`);var X=l(W,2);N(X,"href",`${V??""}/books`);var Y=l(X,2);N(Y,"href",`${V??""}/artworks`);var ie=l(Y,2);N(ie,"href",`${V??""}/list`),v(Z);var ee=l(Z,2),j=l(n(ee),2),te=n(j);Te(te),v(j);var ve=l(j,2);{var oe=s=>{var S=_e(),z=C(S);{var a=b=>{var _=Ae(),y=n(_);Ce(y,5,()=>e($),m=>m.id,(m,o)=>{var d=Pe();let T;var R=n(d),k=n(R),G=n(k,!0);v(k);var B=l(k,2);let A;var H=n(B,!0);v(B),v(R);var c=l(R,2),x=n(c,!0);v(c),v(d),L((i,D)=>{T=re(d,1,"result-item svelte-tsp8tw",null,T,i),N(d,"aria-label",`View details for ${e(o).displayName??""}`),g(G,e(o).displayName),A=re(B,1,"result-type svelte-tsp8tw",null,A,D),g(H,e(o).type),g(x,e(o).dateRange)},[()=>{var i;return{selected:((i=e(r))==null?void 0:i.id)===e(o).id}},()=>({book:e(o).type==="book"})],se),O("click",d,()=>f(e(o))),O("keydown",d,i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),f(e(o)))}),u(m,d)}),v(y);var q=l(y,2),de=n(q);{var ce=m=>{var o=Ee(),d=C(o),T=l(d,2),R=n(T,!0);v(T);var k=l(T,2),G=n(k);{var B=c=>{var x=Be(),i=C(x),D=l(i);{var pe=J=>{var ae=Re(),fe=l(C(ae));L(()=>g(fe,`(${e(r).died-e(r).born} years old)`)),u(J,ae)};E(D,J=>{e(r).died&&e(r).born&&J(pe)})}L(()=>g(i,`${e(r).born||"?"} - ${e(r).died||"present"} `)),u(c,x)},A=c=>{var x=De(),i=C(x),D=l(i,2);L(()=>{g(i,`Published: ${e(r).published??""}`),g(D,` Author: ${e(r).author??""}`)}),u(c,x)};E(G,c=>{e(r).type==="person"?c(B):c(A,!1)})}v(k);var H=l(k,2);L(c=>{N(d,"src",c),N(d,"alt",e(r).displayName),g(R,e(r).displayName)},[()=>Le(e(r).image)],se),O("click",H,()=>F(e(r).type)),u(m,o)},ue=m=>{var o=qe();u(m,o)};E(de,m=>{e(r)?m(ce):m(ue,!1)})}v(q),v(_),u(b,_)},P=b=>{var _=Ie(),y=n(_);v(_),L(()=>g(y,`No results found for "${e(p)??""}"`)),u(b,_)};E(z,b=>{e($).length>0?b(a):b(P,!1)})}u(s,S)},ne=s=>{var S=Fe();u(s,S)};E(ve,s=>{e(p).trim()?s(oe):s(ne,!1)})}v(ee),Me(te,()=>e(p),s=>I(p,s)),u(t,M),$e()}export{Ye as component};
